(this.webpackJsonpsqurs=this.webpackJsonpsqurs||[]).push([[2],{46:function(e,t,n){},56:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r,c=n(4),i=n.n(c),a=n(36),o=n.n(a),u=(n(46),n(5)),s=n(26),l=n(11),d=(n(56),{apiKey:"AIzaSyA6miG1egwhyCpNcBdr-R8P3flUJP8VLj4",authDomain:"squr-d2ae8.firebaseapp.com",databaseURL:"https://squr-d2ae8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"squr-d2ae8",storageBucket:"squr-d2ae8.appspot.com",messagingSenderId:"25610237851",appId:"1:25610237851:web:8b825f5e7ab2363cd2533e"}),b=n(37),v=n(15),j=n(16),f=n(2),h=n(10),O=n(8),p=Object(j.a)(r||(r=Object(v.a)(["\n    border-radius: 0.5em;\n    padding: 0.5em;\n    box-sizing: border-box;\n    box-shadow: inset 0em -.2em .5em #abc;\n    background: transparent;\n    color: #abc;\n    border: none;\n    transition: all 500ms;\n\n    &:hover {\n        box-shadow: inset 0em .2em .5em #abc;\n    }\n"])));var m,x,g=function(e){var t=e.children,n=Object(h.a)(e,["children"]);return Object(O.b)("button",Object(f.a)(Object(f.a)({css:p},n),{},{children:t}))},y=Object(j.a)(m||(m=Object(v.a)(["\n    position: fixed;\n    left: 2em;\n    top: 2em;\n"]))),w=Object(j.a)(x||(x=Object(v.a)(["\n    background: rgba(0,0,0, 0.5);\n    color: #abc;\n    border-radius: 0.5em;\n    padding: 1em;\n    pointer-events: none;\n"]))),k=[{title:"t",value:"time in secs"},{title:"i",value:"index of squr - 1, 2, 3..."},{title:"x",value:"x index of squr"},{title:"y",value:"y index of squr"}],C=[{title:"sin(x)",value:"sine with 0-1 cycle input and 0-1 output"},{title:"tri(x)",value:"triangle with 0-1 cycle input and 0-1 output"},{title:"sqr(x, phase?)",value:"square with 0-1 cycle input, optional phase"},{title:"stp(x, a, b, c, ...)",value:"step sequencer with 0-1 cycle input"}],q=function(e){var t=e.map((function(e){var t=e.title,n=e.value;return Object(O.c)("li",{children:[Object(O.c)("strong",{children:[t,":"]})," ",n]},t+n)}));return Object(O.b)("ul",{children:t})};var R,S=function(e){Object(b.a)(e);var t=Object(c.useState)(!0),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(O.c)("div",{css:w,children:[Object(O.b)("p",{children:"make the squrs sing and shine with math expressions"}),Object(O.b)("p",{children:"all is syncd, tell friends"}),Object(O.b)("h3",{children:"Variables"}),q(k),Object(O.b)("h3",{children:"Functions"}),q(C)]});return Object(O.c)("div",{css:y,children:[Object(O.b)("div",{children:Object(O.b)(g,{onClick:function(){return i((function(e){return!e}))},children:"?"})}),r&&a]})},E=Object(j.a)(R||(R=Object(v.a)(["\n    color: white;\n    text-align: center;\n"])));var M=function(e){var t=e.onClick;return Object(O.c)("div",{css:E,children:[Object(O.b)("h1",{children:"SQUR!"}),Object(O.b)("div",{children:Object(O.b)(g,{onClick:t,children:"\u25a1\u25a1 start \u25a1\u25a1"})}),Object(O.b)("div",{children:Object(O.b)("small",{children:"gotta make you click to make sounds, aight, domj"})})]})},N=Object(c.createContext)({volume:null}),F=n(7);var A=function(e){var t=e.children,n=Object(c.useRef)(1);return Object(c.useEffect)((function(){return window.setVolume=function(e){return n.current=e},function(){delete window.setVolume}}),[]),Object(F.jsx)(N.Provider,{value:{volume:n},children:t})},I=n(6);function P(e){var t=e.on,n=e.onClick,r=e.side,c=e.active,i=t?"\u2665":"\ud83d\udda4";return Object(F.jsx)(g,{onClick:n,style:{width:r,height:r,background:c?"#abc":"transparent"},children:i})}var B=function(e){e.res;var t=e.expression,n=e.setExpression,r=e.side,c=e.extra,i=(null===c||void 0===c?void 0:c.step)||0,a=t.split(",").map((function(e){var t=+e;return isNaN(t)?0:t}))||[0],o="calc(".concat(r," / 4 - 5px)"),u=a.map((function(e,t){var r=e>.5;return Object(F.jsx)(P,{active:i===t,side:o,on:e>.5,onClick:function(){return function(e,t){var r=Object(I.a)(a);r[e]=t,n(r.join(","))}(t,r?0:1)}},t)}));return Object(F.jsx)("div",{children:u})},D=function(e){return{width:e,height:e}};var z=function(e){var t=e.color,n=e.children,r=e.side;return Object(F.jsx)("div",{style:Object(f.a)(Object(f.a)(Object(f.a)({},{borderRadius:"0.5em",padding:"0.5em",boxSizing:"border-box",boxShadow:"inset 0em -.2em .5em #abc"}),D(r)),t),children:n})},L=n(24),T=n(38),H=function(e){var t=i.a.useRef(),n=i.a.useRef(),r=function r(c){if(n.current){var i=c-n.current;e(i)}n.current=c,t.current=requestAnimationFrame(r)};i.a.useEffect((function(){return t.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(t.current)}}),[])};var V,W=function(e){var t=e.value,n=Object(c.useRef)(Array(30).fill(0)),r=Object(c.useState)(n.current),i=Object(u.a)(r,2),a=i[0],o=i[1],s=Object(c.useRef)(0);s.current=t,H((function(){n.current=n.current.slice(1,n.current.length),n.current.push(s.current),o(n.current)}));var l=a.map((function(e,t){return"L".concat(1*t," ").concat(100-(90*Math.abs(e)+5))})).join(" ");return Object(F.jsx)("div",{style:{width:"100%"},children:Object(F.jsx)("svg",{height:"30",width:"100%",viewBox:"0 0 30 100",preserveAspectRatio:"none",children:Object(F.jsx)("path",{d:"M-5 0 ".concat(l),strokeWidth:"2",stroke:"currentColor",fill:"none",vectorEffect:"non-scaling-stroke"})})})},J="C",U="F",G="G",K="Bb",Q=[J,"D",U,G,K],X=function(e){var t=Q[e%Q.length],n=Math.floor(e/Q.length);return"".concat(t).concat(n+2)},Y=function(e){return Object(L.pipe)(e,Object(T.collect)((function(e,t){return Object(O.c)("span",{children:[Object(O.c)("strong",{children:[" ",e,":"]}),t]})})))},Z=Object(j.a)(V||(V=Object(v.a)(["\n    opacity: 0.3;\n    transition: all 500ms;\n    &:hover {\n        opacity: 1;\n    }\n"])));var $=function(e){var t=e.expression,n=e.setExpression,r=e.res,c=e.fontColor,i=e.variables,a=e.error,o=e.instrumentName;return Object(O.c)(O.a,{children:[Object(O.b)("textarea",{style:{fontFamily:"monospace",borderRadius:"0.3em",padding:"0.5em",boxSizing:"border-box",border:"none",width:"100%",boxShadow:"inset 0em .2em .5em #abc",background:"transparent",color:c,fontWeight:"bold",transition:"all 300ms",maxWidth:"100%",minWidth:"100%",minHeight:"50%",maxHeight:"100%"},value:t,onChange:function(e){return n(e.target.value)}}),Object(O.c)("div",{css:Z,style:{color:c},children:[Object(O.b)(W,{value:r}),Object(O.c)("div",{children:[X((null===i||void 0===i?void 0:i.i)||0),Y(i||{})]}),Object(O.b)("div",{style:{color:c,fontSize:"2em"},children:o})]}),a&&Object(O.b)("div",{style:{color:"red"},children:a.description})]})},_=n(39),ee=function(e){return Math.sin(e*Math.PI*2)/2+.5},te=function(e){return e%1<.5?e%1*2:1-2*(e%1-.5)},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return e%1>t?1:0},re=function(e){return 1-e},ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return e*re(n)+t*n},ie=function(e){var t=arguments.length<=1?0:arguments.length-1,n=Math.floor(e*t)%t;return n+1<1||arguments.length<=n+1?void 0:arguments[n+1]},ae=function(e,t){var n=Object(c.useContext)(N).volume,r=Object(c.useState)(0),i=Object(u.a)(r,2),a=i[0],o=i[1];H((function(e){o(j.current)}));var s=Object(c.useRef)((function(){return.5})),d=Object(c.useRef)(null);Object(c.useEffect)((function(){try{s.current=Object(_.a)(e),d.current=null}catch(t){d.current=t}}),[e]);var b=Object(c.useRef)(0),v=Object(c.useRef)(null),j=Object(c.useRef)(0);Object(c.useEffect)((function(){return v.current=(new l.e).toDestination(),function(){var e;null===(e=v.current)||void 0===e||e.disconnect().dispose()}}),[]);var h=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;h.current=new l.d({frequency:(e=(null===t||void 0===t?void 0:t.i)||0,l.a(X(e)).toFrequency()),type:"sine",volume:-30,detune:30*Math.random()-15}).toDestination().start();var r=new l.b((function(e){var r,c=s.current(Object(f.a)({time:e,t:e,sin:ee,tri:te,sqr:ne,stp:ie,inv:re},t));if(j.current="number"===typeof c?(r=c,Math.max(Math.min(r,1),-1)):0,j.current-b.current>.95&&v.current&&n&&v.current.triggerAttackRelease(X((null===t||void 0===t?void 0:t.i)||0),"8n",e,n.current),b.current=j.current,!isNaN(j.current)&&h.current&&n){var i=0===j.current?-1/0:ce(-30,ce(-30,0,n.current),Math.abs(j.current));h.current.volume.rampTo(i,.06,e)}}),"0.03").start(0);return function(){var e;null===(e=h.current)||void 0===e||e.disconnect().dispose(),r.dispose()}}),[]),{res:a,error:d.current,instrumentName:"synth"}};var oe=function(e){var t,n=e.init,r=e.side,i=void 0===r?100:r,a=e.expression,o=e.setExpression,s=e.variables,l=void 0===s?{}:s,d=e.contentComponent,b=void 0===d?$:d,v=e.useExpressionHook,j=void 0===v?ae:v,f=Object(c.useState)(n||"0"),h=Object(u.a)(f,2),O=h[0],p=h[1],m=null!==a&&void 0!==a?a:O,x=null!==o&&void 0!==o?o:p,g=j(m,l),y=g.res,w=g.error,k=g.instrumentName,C=g.extra,q=y<.5?"#abc":"#444",R=y>0?(t=y,{background:"rgba(".concat("170, 187, 204",", ").concat(t,")")}):function(e){return{background:"rgba(0,0,0, ".concat(e,")")}}(-y),S=b;return Object(F.jsx)(z,{color:R,side:i,children:Object(F.jsx)(S,{side:i,expression:m,setExpression:x,res:y,fontColor:q,variables:l,error:w,instrumentName:k,extra:C})})};n(63);var ue=function(e){var t=e.side,n=e.path,r=void 0===n?"/squr":n,i=Object(h.a)(e,["side","path"]),a=Object(s.b)().ref(r),o=Object(s.c)(a),l=o.data,d=o.status,b=Object(c.useState)(".5"),v=Object(u.a)(b,2),j=v[0],O=v[1];return Object(c.useEffect)((function(){var e;"success"===d&&l.expr!==j&&O(null!==(e=l.expr)&&void 0!==e?e:".5")}),[d,l]),Object(F.jsx)(oe,Object(f.a)({side:t,expression:j,setExpression:function(e){O(e),a.set({expr:e})}},i))},se=i.a.createContext(0),le=function(e,t){var n=Object(c.useRef)([0]),r=Object(c.useState)(0),i=Object(u.a)(r,2),a=i[0],o=i[1];Object(c.useEffect)((function(){var t=e.split(",").map((function(e){var t=+e;return isNaN(t)?0:t}));n.current=t||[0]}),[e]);var s=Object(c.useState)(0),d=Object(u.a)(s,2),b=d[0],v=d[1],j=Object(c.useRef)(null);return Object(c.useEffect)((function(){j.current=new l.c("white").toDestination(),j.current.volume.rampTo(-30,0);var e=new l.b((function(e){var t,r=Math.round(4*e)%n.current.length,c=n.current[r];o(r);var i=c>=Math.random();v(i?.5:0),i&&(null===(t=j.current)||void 0===t||t.start(e).stop("+32n"))}),"8n").start(0);return function(){var t;null===(t=j.current)||void 0===t||t.dispose(),e.dispose()}}),[]),{res:b,error:null,instrumentName:"sequencer",extra:{step:a}}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(c.useState)(e),n=Object(u.a)(t,2),r=n[0],i=n[1];return H((function(e){return i((function(t){return t+e/1e3}))})),r},be="".concat(40,"vmin"),ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e%t},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Math.round(e/t)},fe=new Array(4).fill(1).map((function(e,t){var n=t>1,r=n?B:void 0,c=n?le:void 0;return Object(F.jsx)(ue,{side:be,path:"/squrs/".concat(t),contentComponent:r,useExpressionHook:c,variables:{i:t+1,x:ve(t)+1,y:je(t)+1}},t)}));var he=function(){var e=de(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(F.jsx)(s.a,{firebaseConfig:d,children:Object(F.jsx)(A,{children:Object(F.jsx)(se.Provider,{value:e,children:Object(F.jsx)("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center"},children:r?Object(F.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(2,", ").concat(be,")"),gap:"2vmin"},children:[Object(F.jsx)(S,{}),fe]}):Object(F.jsx)(M,{onClick:function(){i(!0),l.g(),l.f.start()}})})})})})},Oe=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,73)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};o.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(he,{})}),document.getElementById("root")),Oe()}},[[66,3,4]]]);
//# sourceMappingURL=main.e36d8a33.chunk.js.map