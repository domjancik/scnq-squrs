(this.webpackJsonpsqurs=this.webpackJsonpsqurs||[]).push([[2],{46:function(e,t,n){},56:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r,c=n(4),i=n.n(c),a=n(36),o=n.n(a),u=(n(46),n(5)),s=n(26),l=n(11),b=(n(56),{apiKey:"AIzaSyA6miG1egwhyCpNcBdr-R8P3flUJP8VLj4",authDomain:"squr-d2ae8.firebaseapp.com",databaseURL:"https://squr-d2ae8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"squr-d2ae8",storageBucket:"squr-d2ae8.appspot.com",messagingSenderId:"25610237851",appId:"1:25610237851:web:8b825f5e7ab2363cd2533e"}),d=n(37),v=n(15),j=n(16),f=n(2),h=n(10),O=n(8),p=Object(j.a)(r||(r=Object(v.a)(["\n    border-radius: 0.5em;\n    padding: 0.5em;\n    box-sizing: border-box;\n    box-shadow: inset 0em -.2em .5em #abc;\n    background: transparent;\n    color: #abc;\n    border: none;\n    transition: all 500ms;\n\n    &:hover {\n        box-shadow: inset 0em .2em .5em #abc;\n    }\n"])));var m,x,g=function(e){var t=e.children,n=Object(h.a)(e,["children"]);return Object(O.b)("button",Object(f.a)(Object(f.a)({css:p},n),{},{children:t}))},y=Object(j.a)(m||(m=Object(v.a)(["\n    position: fixed;\n    left: 2em;\n    top: 2em;\n"]))),w=Object(j.a)(x||(x=Object(v.a)(["\n    background: rgba(0,0,0, 0.5);\n    color: #abc;\n    border-radius: 0.5em;\n    padding: 1em;\n    pointer-events: none;\n"]))),k=[{title:"t",value:"time in secs"},{title:"i",value:"index of squr - 1, 2, 3..."},{title:"x",value:"x index of squr"},{title:"y",value:"y index of squr"}],C=[{title:"sin(x)",value:"sine with 0-1 cycle input and 0-1 output"},{title:"tri(x)",value:"triangle with 0-1 cycle input and 0-1 output"},{title:"sqr(x, phase?)",value:"square with 0-1 cycle input, optional phase"},{title:"stp(x, a, b, c, ...)",value:"step sequencer with 0-1 cycle input"}],q=function(e){var t=e.map((function(e){var t=e.title,n=e.value;return Object(O.c)("li",{children:[Object(O.c)("strong",{children:[t,":"]})," ",n]},t+n)}));return Object(O.b)("ul",{children:t})};var R,S=function(e){Object(d.a)(e);var t=Object(c.useState)(!0),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(O.c)("div",{css:w,children:[Object(O.b)("p",{children:"make the squrs sing and shine with math expressions"}),Object(O.b)("p",{children:"all is syncd, tell friends"}),Object(O.b)("h3",{children:"Variables"}),q(k),Object(O.b)("h3",{children:"Functions"}),q(C)]});return Object(O.c)("div",{css:y,children:[Object(O.b)("div",{children:Object(O.b)(g,{onClick:function(){return i((function(e){return!e}))},children:"?"})}),r&&a]})},E=Object(j.a)(R||(R=Object(v.a)(["\n    color: white;\n    text-align: center;\n"])));var M=function(e){var t=e.onClick;return Object(O.c)("div",{css:E,children:[Object(O.b)("h1",{children:"SQUR!"}),Object(O.b)("div",{children:Object(O.b)(g,{onClick:t,children:"\u25a1\u25a1 start \u25a1\u25a1"})}),Object(O.b)("div",{children:Object(O.b)("small",{children:"gotta make you click to make sounds, aight, domj"})})]})},N=Object(c.createContext)({volume:null}),F=n(7);var A=function(e){var t=e.children,n=Object(c.useRef)(1);return Object(c.useEffect)((function(){return window.setVolume=function(e){return n.current=e},function(){delete window.setVolume}}),[]),Object(F.jsx)(N.Provider,{value:{volume:n},children:t})},I=n(6);function P(e){var t=e.value,n=e.onClick,r=e.side,c=e.active,i="\ud83d\udda4";return t>=.25&&(i="\ud83d\udc94"),t>=.5&&(i="\ud83e\udde1"),t>=.75&&(i="\ud83d\udc96"),t>=1&&(i="\ud83d\udc9d"),Object(F.jsx)(g,{onClick:n,style:{width:r,height:r,background:c?"#abc":"transparent"},children:i})}var B=function(e){e.res;var t=e.expression,n=e.setExpression,r=e.side,c=e.extra,i=(null===c||void 0===c?void 0:c.step)||0,a=t.split(",").map((function(e){var t=+e;return isNaN(t)?0:t}))||[0],o="calc(".concat(r," / 4 - 5px)"),u=a.map((function(e,t){return Object(F.jsx)(P,{active:i===t,side:o,value:e,onClick:function(){return function(e,t){var r=Object(I.a)(a);r[e]=t,n(r.join(","))}(t,(e+.25)%1)}},t)}));return Object(F.jsx)("div",{children:u})},z=function(e){return{width:e,height:e}};var D=function(e){var t=e.color,n=e.children,r=e.side;return Object(F.jsx)("div",{style:Object(f.a)(Object(f.a)(Object(f.a)({},{borderRadius:"0.5em",padding:"0.5em",boxSizing:"border-box",boxShadow:"inset 0em -.2em .5em #abc"}),z(r)),t),children:n})},L=n(24),T=n(38),H=function(e){var t=i.a.useRef(),n=i.a.useRef(),r=function r(c){if(n.current){var i=c-n.current;e(i)}n.current=c,t.current=requestAnimationFrame(r)};i.a.useEffect((function(){return t.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(t.current)}}),[])};var V,W=function(e){var t=e.value,n=Object(c.useRef)(Array(30).fill(0)),r=Object(c.useState)(n.current),i=Object(u.a)(r,2),a=i[0],o=i[1],s=Object(c.useRef)(0);s.current=t,H((function(){n.current=n.current.slice(1,n.current.length),n.current.push(s.current),o(n.current)}));var l=a.map((function(e,t){return"L".concat(1*t," ").concat(100-(90*Math.abs(e)+5))})).join(" ");return Object(F.jsx)("div",{style:{width:"100%"},children:Object(F.jsx)("svg",{height:"30",width:"100%",viewBox:"0 0 30 100",preserveAspectRatio:"none",children:Object(F.jsx)("path",{d:"M-5 0 ".concat(l),strokeWidth:"2",stroke:"currentColor",fill:"none",vectorEffect:"non-scaling-stroke"})})})},J="C",U="F",G="Bb",K=[J,"Eb",U,"Ab",G],Q=function(e){var t=K[e%K.length],n=Math.floor(e/K.length);return"".concat(t).concat(n+2)},X=function(e){return Object(L.pipe)(e,Object(T.collect)((function(e,t){return Object(O.c)("span",{children:[Object(O.c)("strong",{children:[" ",e,":"]}),t]})})))},Y=Object(j.a)(V||(V=Object(v.a)(["\n    opacity: 0.3;\n    transition: all 500ms;\n    &:hover {\n        opacity: 1;\n    }\n"])));var Z=function(e){var t=e.expression,n=e.setExpression,r=e.res,c=e.fontColor,i=e.variables,a=e.error,o=e.instrumentName;return Object(O.c)(O.a,{children:[Object(O.b)("textarea",{style:{fontFamily:"monospace",borderRadius:"0.3em",padding:"0.5em",boxSizing:"border-box",border:"none",width:"100%",boxShadow:"inset 0em .2em .5em #abc",background:"transparent",color:c,fontWeight:"bold",transition:"all 300ms",maxWidth:"100%",minWidth:"100%",minHeight:"50%",maxHeight:"100%"},value:t,onChange:function(e){return n(e.target.value)}}),Object(O.c)("div",{css:Y,style:{color:c},children:[Object(O.b)(W,{value:r}),Object(O.c)("div",{children:[Q((null===i||void 0===i?void 0:i.i)||0),X(i||{})]}),Object(O.b)("div",{style:{color:c,fontSize:"2em"},children:o})]}),a&&Object(O.b)("div",{style:{color:"red"},children:a.description})]})},$=n(39),_=function(e){return Math.sin(e*Math.PI*2)/2+.5},ee=function(e){return e%1<.5?e%1*2:1-2*(e%1-.5)},te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return e%1>t?1:0},ne=function(e){return 1-e},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return e*ne(n)+t*n},ce=function(e){var t=arguments.length<=1?0:arguments.length-1,n=Math.floor(e*t)%t;return n+1<1||arguments.length<=n+1?void 0:arguments[n+1]},ie=function(e,t){var n=Object(c.useContext)(N).volume,r=Object(c.useState)(0),i=Object(u.a)(r,2),a=i[0],o=i[1];H((function(e){o(j.current)}));var s=Object(c.useRef)((function(){return.5})),b=Object(c.useRef)(null);Object(c.useEffect)((function(){try{s.current=Object($.a)(e),b.current=null}catch(t){b.current=t}}),[e]);var d=Object(c.useRef)(0),v=Object(c.useRef)(null),j=Object(c.useRef)(0);Object(c.useEffect)((function(){return v.current=(new l.e).toDestination(),function(){var e;null===(e=v.current)||void 0===e||e.disconnect().dispose()}}),[]);var h=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;h.current=new l.d({frequency:(e=(null===t||void 0===t?void 0:t.i)||0,l.a(Q(e)).toFrequency()),type:"sine",volume:-30,detune:30*Math.random()-15}).toDestination().start();var r=new l.b((function(e){var r,c=s.current(Object(f.a)({time:e,t:e,sin:_,tri:ee,sqr:te,stp:ce,inv:ne},t));if(j.current="number"===typeof c?(r=c,Math.max(Math.min(r,1),-1)):0,j.current-d.current>.95&&v.current&&n&&v.current.triggerAttackRelease(Q((null===t||void 0===t?void 0:t.i)||0),"8n",e,n.current),d.current=j.current,!isNaN(j.current)&&h.current&&n){var i=0===j.current?-1/0:re(-30,re(-30,0,n.current),Math.abs(j.current));h.current.volume.rampTo(i,.06,e)}}),"0.03").start(0);return function(){var e;null===(e=h.current)||void 0===e||e.disconnect().dispose(),r.dispose()}}),[]),{res:a,error:b.current,instrumentName:"synth"}};var ae=function(e){var t,n=e.init,r=e.side,i=void 0===r?100:r,a=e.expression,o=e.setExpression,s=e.variables,l=void 0===s?{}:s,b=e.contentComponent,d=void 0===b?Z:b,v=e.useExpressionHook,j=void 0===v?ie:v,f=Object(c.useState)(n||"0"),h=Object(u.a)(f,2),O=h[0],p=h[1],m=null!==a&&void 0!==a?a:O,x=null!==o&&void 0!==o?o:p,g=j(m,l),y=g.res,w=g.error,k=g.instrumentName,C=g.extra,q=y<.5?"#abc":"#444",R=y>0?(t=y,{background:"rgba(".concat("170, 187, 204",", ").concat(t,")")}):function(e){return{background:"rgba(0,0,0, ".concat(e,")")}}(-y),S=d;return Object(F.jsx)(D,{color:R,side:i,children:Object(F.jsx)(S,{side:i,expression:m,setExpression:x,res:y,fontColor:q,variables:l,error:w,instrumentName:k,extra:C})})};n(63);var oe=function(e){var t=e.side,n=e.path,r=void 0===n?"/squr":n,i=Object(h.a)(e,["side","path"]),a=Object(s.b)().ref(r),o=Object(s.c)(a),l=o.data,b=o.status,d=Object(c.useState)(".5"),v=Object(u.a)(d,2),j=v[0],O=v[1];return Object(c.useEffect)((function(){var e;"success"===b&&l.expr!==j&&O(null!==(e=l.expr)&&void 0!==e?e:".5")}),[b,l]),Object(F.jsx)(ae,Object(f.a)({side:t,expression:j,setExpression:function(e){O(e),a.set({expr:e})}},i))},ue=i.a.createContext(0),se=function(e,t){var n=Object(c.useRef)([0]),r=Object(c.useState)(0),i=Object(u.a)(r,2),a=i[0],o=i[1];Object(c.useEffect)((function(){var t=e.split(",").map((function(e){var t=+e;return isNaN(t)?0:t}));n.current=t||[0]}),[e]);var s=Object(c.useState)(0),b=Object(u.a)(s,2),d=b[0],v=b[1],j=Object(c.useRef)(null);return Object(c.useEffect)((function(){j.current=new l.c("white").toDestination(),j.current.volume.rampTo(-30,0);var e=new l.b((function(e){var t,r=Math.round(4*e)%n.current.length,c=n.current[r];o(r);var i=c>=Math.random();v(i?.5:0),i&&(null===(t=j.current)||void 0===t||t.start(e).stop("+32n"))}),"8n").start(0);return function(){var t;null===(t=j.current)||void 0===t||t.dispose(),e.dispose()}}),[]),{res:d,error:null,instrumentName:"sequencer",extra:{step:a}}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(c.useState)(e),n=Object(u.a)(t,2),r=n[0],i=n[1];return H((function(e){return i((function(t){return t+e/1e3}))})),r},be="".concat(20,"vmin"),de=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e%t},ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.round(e/t)},je=function(e){var t=new Array(e).fill(1);return t.map((function(e,n){var r=n>t.length-3,c=r?B:void 0,i=r?se:void 0;return Object(F.jsx)(oe,{side:be,path:"/squrs/".concat(n),contentComponent:c,useExpressionHook:i,variables:{i:n+1,x:de(n)+1,y:ve(n)+1}},n)}))}(16);var fe=function(){var e=le(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(F.jsx)(s.a,{firebaseConfig:b,children:Object(F.jsx)(A,{children:Object(F.jsx)(ue.Provider,{value:e,children:Object(F.jsx)("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center"},children:r?Object(F.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(4,", ").concat(be,")"),gap:"2vmin"},children:[Object(F.jsx)(S,{}),je]}):Object(F.jsx)(M,{onClick:function(){i(!0),l.g(),l.f.start()}})})})})})},he=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,73)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};o.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(fe,{})}),document.getElementById("root")),he()}},[[66,3,4]]]);
//# sourceMappingURL=main.2ae30b2b.chunk.js.map