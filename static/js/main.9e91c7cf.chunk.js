(this.webpackJsonpsqurs=this.webpackJsonpsqurs||[]).push([[2],{45:function(e,t,n){},55:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r,c=n(4),i=n.n(c),a=n(35),o=n.n(a),u=(n(45),n(5)),s=n(25),l=n(10),b=(n(55),{apiKey:"AIzaSyA6miG1egwhyCpNcBdr-R8P3flUJP8VLj4",authDomain:"squr-d2ae8.firebaseapp.com",databaseURL:"https://squr-d2ae8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"squr-d2ae8",storageBucket:"squr-d2ae8.appspot.com",messagingSenderId:"25610237851",appId:"1:25610237851:web:8b825f5e7ab2363cd2533e"}),d=n(36),v=n(14),f=n(15),j=n(2),h=n(9),O=n(6),p=Object(f.a)(r||(r=Object(v.a)(["\n    border-radius: 0.5em;\n    padding: 0.5em;\n    box-sizing: border-box;\n    box-shadow: inset 0em -.2em .5em #abc;\n    background: transparent;\n    color: #abc;\n    border: none;\n    transition: all 500ms;\n\n    &:hover {\n        box-shadow: inset 0em .2em .5em #abc;\n    }\n"])));var m,g,x=function(e){var t=e.children,n=Object(h.a)(e,["children"]);return Object(O.b)("button",Object(j.a)(Object(j.a)({css:p},n),{},{children:t}))},y=Object(f.a)(m||(m=Object(v.a)(["\n    position: fixed;\n    left: 2em;\n    top: 2em;\n"]))),w=Object(f.a)(g||(g=Object(v.a)(["\n    background: rgba(0,0,0, 0.5);\n    color: #abc;\n    border-radius: 0.5em;\n    padding: 1em;\n    pointer-events: none;\n"]))),k=[{title:"t",value:"time in secs"},{title:"i",value:"index of squr - 1, 2, 3..."},{title:"x",value:"x index of squr"},{title:"y",value:"y index of squr"}],q=[{title:"sin(x)",value:"sine with 0-1 cycle input and 0-1 output"},{title:"tri(x)",value:"triangle with 0-1 cycle input and 0-1 output"},{title:"sqr(x, phase?)",value:"square with 0-1 cycle input, optional phase"},{title:"stp(x, a, b, c, ...)",value:"step sequencer with 0-1 cycle input"}],C=function(e){var t=e.map((function(e){var t=e.title,n=e.value;return Object(O.c)("li",{children:[Object(O.c)("strong",{children:[t,":"]})," ",n]},t+n)}));return Object(O.b)("ul",{children:t})};var R,S=function(e){Object(d.a)(e);var t=Object(c.useState)(!0),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(O.c)("div",{css:w,children:[Object(O.b)("p",{children:"make the squrs sing and shine with math expressions"}),Object(O.b)("p",{children:"all is syncd, tell friends"}),Object(O.b)("h3",{children:"Variables"}),C(k),Object(O.b)("h3",{children:"Functions"}),C(q)]});return Object(O.c)("div",{css:y,children:[Object(O.b)("div",{children:Object(O.b)(x,{onClick:function(){return i((function(e){return!e}))},children:"?"})}),r&&a]})},E=Object(f.a)(R||(R=Object(v.a)(["\n    color: white;\n    text-align: center;\n"])));var M=function(e){var t=e.onClick;return Object(O.c)("div",{css:E,children:[Object(O.b)("h1",{children:"SQUR!"}),Object(O.b)("div",{children:Object(O.b)(x,{onClick:t,children:"\u25a1\u25a1 start \u25a1\u25a1"})}),Object(O.b)("div",{children:Object(O.b)("small",{children:"gotta make you click to make sounds, aight, domj"})})]})},F=Object(c.createContext)({volume:null}),N=n(7);var A=function(e){var t=e.children,n=Object(c.useRef)(1);return Object(c.useEffect)((function(){return window.setVolume=function(e){return n.current=e},function(){delete window.setVolume}}),[]),Object(N.jsx)(F.Provider,{value:{volume:n},children:t})},I=function(e){return{width:e,height:e}};var P=function(e){var t=e.color,n=e.children,r=e.side;return Object(N.jsx)("div",{style:Object(j.a)(Object(j.a)(Object(j.a)({},{borderRadius:"0.5em",padding:"0.5em",boxSizing:"border-box",boxShadow:"inset 0em -.2em .5em #abc"}),I(r)),t),children:n})},B=n(23),D=n(37),z=function(e){var t=i.a.useRef(),n=i.a.useRef(),r=function r(c){if(n.current){var i=c-n.current;e(i)}n.current=c,t.current=requestAnimationFrame(r)};i.a.useEffect((function(){return t.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(t.current)}}),[])};var L,T=function(e){var t=e.value,n=Object(c.useRef)(Array(30).fill(0)),r=Object(c.useState)(n.current),i=Object(u.a)(r,2),a=i[0],o=i[1],s=Object(c.useRef)(0);s.current=t,z((function(){n.current=n.current.slice(1,n.current.length),n.current.push(s.current),o(n.current)}));var l=a.map((function(e,t){return"L".concat(1*t," ").concat(100-(90*Math.abs(e)+5))})).join(" ");return Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsx)("svg",{height:"30",width:"100%",viewBox:"0 0 30 100",preserveAspectRatio:"none",children:Object(N.jsx)("path",{d:"M-5 0 ".concat(l),strokeWidth:"2",stroke:"currentColor",fill:"none",vectorEffect:"non-scaling-stroke"})})})},H="C",V="F",W="G",J="Bb",U=[H,"D",V,W,J],G=function(e){var t=U[e%U.length],n=Math.floor(e/U.length);return"".concat(t).concat(n+2)},K=function(e){return Object(B.pipe)(e,Object(D.collect)((function(e,t){return Object(O.c)("span",{children:[Object(O.c)("strong",{children:[" ",e,":"]}),t]})})))},Q=Object(f.a)(L||(L=Object(v.a)(["\n    opacity: 0.3;\n    transition: all 500ms;\n    &:hover {\n        opacity: 1;\n    }\n"])));var X=function(e){var t=e.expression,n=e.setExpression,r=e.res,c=e.fontColor,i=e.variables,a=e.error,o=e.instrumentName;return Object(O.c)(O.a,{children:[Object(O.b)("textarea",{style:{fontFamily:"monospace",borderRadius:"0.3em",padding:"0.5em",boxSizing:"border-box",border:"none",width:"100%",boxShadow:"inset 0em .2em .5em #abc",background:"transparent",color:c,fontWeight:"bold",transition:"all 300ms",maxWidth:"100%",minWidth:"100%",minHeight:"50%",maxHeight:"100%"},value:t,onChange:function(e){return n(e.target.value)}}),Object(O.c)("div",{css:Q,style:{color:c},children:[Object(O.b)(T,{value:r}),Object(O.c)("div",{children:[G((null===i||void 0===i?void 0:i.i)||0),K(i||{})]}),Object(O.b)("div",{style:{color:c,fontSize:"2em"},children:o})]}),a&&Object(O.b)("div",{style:{color:"red"},children:a.description})]})},Y=n(38),Z=function(e){return Math.sin(e*Math.PI*2)/2+.5},$=function(e){return e%1<.5?e%1*2:1-2*(e%1-.5)},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return e%1>t?1:0},ee=function(e){return 1-e},te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;return e*ee(n)+t*n},ne=function(e){var t=arguments.length<=1?0:arguments.length-1,n=Math.floor(e*t)%t;return n+1<1||arguments.length<=n+1?void 0:arguments[n+1]},re=function(e,t){var n=Object(c.useContext)(F).volume,r=Object(c.useState)(0),i=Object(u.a)(r,2),a=i[0],o=i[1];z((function(e){o(f.current)}));var s=Object(c.useRef)((function(){return.5})),b=Object(c.useRef)(null);Object(c.useEffect)((function(){try{s.current=Object(Y.a)(e),b.current=null}catch(t){b.current=t}}),[e]);var d=Object(c.useRef)(0),v=Object(c.useRef)(null),f=Object(c.useRef)(0);Object(c.useEffect)((function(){return v.current=(new l.e).toDestination(),function(){var e;null===(e=v.current)||void 0===e||e.disconnect().dispose()}}),[]);var h=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e;h.current=new l.d({frequency:(e=(null===t||void 0===t?void 0:t.i)||0,l.a(G(e)).toFrequency()),type:"sine",volume:-30,detune:30*Math.random()-15}).toDestination().start();var r=new l.b((function(e){var r,c=s.current(Object(j.a)({time:e,t:e,sin:Z,tri:$,sqr:_,stp:ne,inv:ee},t));if(f.current="number"===typeof c?(r=c,Math.max(Math.min(r,1),-1)):0,f.current-d.current>.95&&v.current&&n&&v.current.triggerAttackRelease(G((null===t||void 0===t?void 0:t.i)||0),"8n",e,n.current),d.current=f.current,!isNaN(f.current)&&h.current&&n){var i=0===f.current?-1/0:te(-30,te(-30,0,n.current),Math.abs(f.current));h.current.volume.rampTo(i,.06,e)}}),"0.03").start(0);return function(){var e;null===(e=h.current)||void 0===e||e.disconnect().dispose(),r.dispose()}}),[]),{res:a,error:b.current,instrumentName:"synth"}};var ce=function(e){var t,n=e.init,r=e.side,i=void 0===r?100:r,a=e.expression,o=e.setExpression,s=e.variables,l=void 0===s?{}:s,b=e.contentComponent,d=void 0===b?X:b,v=e.useExpressionHook,f=void 0===v?re:v,j=Object(c.useState)(n||"0"),h=Object(u.a)(j,2),O=h[0],p=h[1],m=null!==a&&void 0!==a?a:O,g=null!==o&&void 0!==o?o:p,x=f(m,l),y=x.res,w=x.error,k=x.instrumentName,q=y<.5?"#abc":"#444",C=y>0?(t=y,{background:"rgba(".concat("170, 187, 204",", ").concat(t,")")}):function(e){return{background:"rgba(0,0,0, ".concat(e,")")}}(-y),R=d;return Object(N.jsx)(P,{color:C,side:i,children:Object(N.jsx)(R,{expression:m,setExpression:g,res:y,fontColor:q,variables:l,error:w,instrumentName:k})})};n(62);var ie=function(e){var t=e.side,n=e.path,r=void 0===n?"/squr":n,i=Object(h.a)(e,["side","path"]),a=Object(s.b)().ref(r),o=Object(s.c)(a),l=o.data,b=o.status,d=Object(c.useState)(".5"),v=Object(u.a)(d,2),f=v[0],O=v[1];return Object(c.useEffect)((function(){var e;"success"===b&&l.expr!==f&&O(null!==(e=l.expr)&&void 0!==e?e:".5")}),[b,l]),Object(N.jsx)(ce,Object(j.a)({side:t,expression:f,setExpression:function(e){O(e),a.set({expr:e})}},i))},ae=i.a.createContext(0),oe=function(e,t){var n=Object(c.useRef)([0]);Object(c.useEffect)((function(){var t=e.split(",").map((function(e){var t=+e;return isNaN(t)?0:t}));n.current=t||[0]}),[e]);var r=Object(c.useState)(0),i=Object(u.a)(r,2),a=i[0],o=i[1],s=Object(c.useRef)(null);return Object(c.useEffect)((function(){s.current=new l.c("white").toDestination(),s.current.volume.rampTo(-20,0);var e=new l.b((function(e){var t,r=n.current[Math.round(4*e)%n.current.length]>=Math.random();o(r?1:0),r&&(null===(t=s.current)||void 0===t||t.start(e).stop("+32n"))}),"8n").start(0);return function(){var t;null===(t=s.current)||void 0===t||t.dispose(),e.dispose()}}),[]),{res:a,error:null,instrumentName:"sequencer"}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(c.useState)(e),n=Object(u.a)(t,2),r=n[0],i=n[1];return z((function(e){return i((function(t){return t+e/1e3}))})),r},se="".concat(20,"vmin"),le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e%t},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.round(e/t)},de=function(e){var t=new Array(e).fill(1);return t.map((function(e,n){var r=n===t.length?oe:void 0;return Object(N.jsx)(ie,{side:se,path:"/squrs/".concat(n),contentComponent:undefined,useExpressionHook:r,variables:{i:n+1,x:le(n)+1,y:be(n)+1}},n)}))}(16);var ve=function(){var e=ue(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(N.jsx)(s.a,{firebaseConfig:b,children:Object(N.jsx)(A,{children:Object(N.jsx)(ae.Provider,{value:e,children:Object(N.jsx)("div",{style:{display:"flex",height:"100vh",width:"100vw",alignItems:"center",justifyContent:"center"},children:r?Object(N.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(4,", ").concat(se,")"),gap:"2vmin"},children:[Object(N.jsx)(S,{}),de]}):Object(N.jsx)(M,{onClick:function(){i(!0),l.g(),l.f.start()}})})})})})},fe=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,72)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};o.a.render(Object(N.jsx)(i.a.StrictMode,{children:Object(N.jsx)(ve,{})}),document.getElementById("root")),fe()}},[[65,3,4]]]);
//# sourceMappingURL=main.9e91c7cf.chunk.js.map